# =============================================================================
# E-commerce Demo - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
#
# Required for: AWS re:Invent 2025 E-commerce Observability Demo
# Application: reinvent-ecommerce-demo
# =============================================================================

# =============================================================================
# Coralogix Configuration (REQUIRED)
# =============================================================================
# Your Coralogix authentication token
CX_TOKEN=cxtp_CukMevyNl9E9ukwf7A3PpwHw4cU5E6

# Coralogix endpoint (EU2 region)
CX_ENDPOINT=https://ingress.eu2.coralogix.com:443

# Application name in Coralogix (all services will use this)
CX_APPLICATION_NAME=ecommerce-platform

# Subsystem names are set per service in docker-compose.yml
# - load-generator
# - product-catalog
# - checkout
# - cart
# - recommendation
# - currency
# - shipping
# - ad-service

# =============================================================================
# OpenTelemetry Configuration
# =============================================================================
# OTel Collector endpoint (for local deployment)
OTEL_EXPORTER_OTLP_ENDPOINT=http://coralogix-opentelemetry-collector:4317

# For direct export to Coralogix (alternative)
# OTEL_EXPORTER_OTLP_ENDPOINT=https://ingress.eu2.coralogix.com:443

# =============================================================================
# PostgreSQL Database Configuration
# =============================================================================
POSTGRES_HOST=postgresql-primary
POSTGRES_PORT=5432
POSTGRES_DB=ecommerce
POSTGRES_USER=ecommerce_user
POSTGRES_PASSWORD=ecommerce_password

# Database connection pool settings
DB_MAX_CONNECTIONS=100

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379

# =============================================================================
# Demo Mode Configuration
# =============================================================================
# Demo mode: 'normal' or 'blackfriday'
# - normal: Standard operation
# - blackfriday: Simulates high load with failures (45% checkout failure rate)
DEMO_MODE=normal

# =============================================================================
# Service URLs (for inter-service communication)
# =============================================================================
# These are automatically configured in docker-compose.yml
# Override only if deploying services separately

# PRODUCT_CATALOG_URL=http://product-catalog:8014
# CHECKOUT_URL=http://checkout:8016
# CART_URL=http://cart:8013
# RECOMMENDATION_URL=http://recommendation:8011
# CURRENCY_URL=http://currency:8018
# SHIPPING_URL=http://shipping:8019
# AD_URL=http://ad-service:8017

# =============================================================================
# AWS Configuration (for Kubernetes deployment)
# =============================================================================
# AWS_REGION=us-east-1
# AWS_ACCOUNT_ID=your_aws_account_id

# =============================================================================
# Kubernetes Configuration (optional)
# =============================================================================
# K8S_NAMESPACE=ecommerce-demo
# K8S_IMAGE_PULL_POLICY=IfNotPresent

# =============================================================================
# Notes
# =============================================================================
# 1. All services use the same Coralogix token but different subsystem names
# 2. Traces will flow: Application=reinvent-ecommerce-demo, Subsystem=[service-name]
# 3. PostgreSQL and Redis are managed by docker-compose (volumes for persistence)
# 4. Demo mode can be toggled via load-generator API: POST /admin/demo-mode
# 5. For production, use strong passwords and proper secret management
#
# Quick Start:
#   1. Copy this file: cp env.example .env
#   2. Update CX_TOKEN with your actual token (already set above)
#   3. Build services: cd docker && docker-compose build
#   4. Start services: docker-compose up
#   5. Generate traffic: curl -X POST http://localhost:8010/admin/generate-traffic \
#      -H "Content-Type: application/json" \
#      -d '{"duration_seconds": 60, "requests_per_minute": 30}'
#   6. Check Coralogix dashboard for traces!
#
# =============================================================================

